{% extends "base.html" %}
{% block title %}Sublease Details{% endblock %}

{% block content %}

<!-- Header -->
<h2 class="fw-semibold mb-4">{{ object.address }}</h2>

<div class="row g-4">

    <div class="col-md-7">

        <div class="figma-card p-0 mb-4" style="overflow: hidden;">

            {% if object.cover_photo %}
            <img src="{{ object.cover_photo.url }}" class="w-100"
                 style="height: 260px; object-fit: cover;">
            {% endif %}

            <div class="p-4">

                <h4 class="fw-semibold mb-2">${{ object.price }}</h4>

                {% if object.available_text %}
                    <p class="text-muted small mb-2">ðŸ“… {{ object.available_text }}</p>
                {% elif object.available_from and object.available_to %}
                    <p class="text-muted small mb-2">
                        ðŸ“… {{ object.available_from }} â†’ {{ object.available_to }}
                    </p>
                {% endif %}

                {% if object.description %}
                <p class="text-muted">{{ object.description }}</p>
                {% endif %}

                {% if user == object.user %}
                <div class="d-flex gap-2 mt-3">
                    <a href="{% url 'sublease-edit' object.pk %}" class="figma-add-btn">Edit</a>
                    <a href="{% url 'sublease-delete' object.pk %}" class="figma-btn-cancel">Delete</a>
                    <a href="{% url 'sublease-add-photo' object.pk %}" class="figma-contribute-btn">
                        + Add Photo
                    </a>
                </div>
                {% else %}
                <div class="mt-3">
                    <a href="{% url 'start-conversation' object.pk %}" class="figma-contribute-btn w-100">
                        Message Subleaser
                    </a>
                </div>
                {% endif %}
            </div>
        </div>

    </div>

    <div class="col-md-5">
        <h5 class="fw-semibold mb-3">Gallery</h5>

        <div class="figma-card p-3">
            {% if object.photos.all %}
            <div class="row g-3">
                {% for photo in object.photos.all %}
                <div class="col-6">
                    <img src="{{ photo.image.url }}" class="w-100 rounded"
                         style="height: 120px; object-fit: cover;">
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p class="text-muted">No photos uploaded yet.</p>
            {% endif %}
        </div>
    </div>

</div>

{% endblock %}